{"version":3,"sources":["webpack:///E:/键盘敲烂/ourChat - H5/components/free-ui/free-moment-list.vue?1444","webpack:///E:/键盘敲烂/ourChat - H5/components/free-ui/free-moment-list.vue?f2bb","webpack:///E:/键盘敲烂/ourChat - H5/components/free-ui/free-moment-list.vue?543d","webpack:///E:/键盘敲烂/ourChat - H5/components/free-ui/free-moment-list.vue?15f4","uni-app:///components/free-ui/free-moment-list.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACoE;AACL;;;AAG/D;AACsK;AACtK,gBAAgB,gLAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAA4nB,CAAgB,yoBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkEhpB;AACA,iG;AACA;AACA;AACA,0BADA;AAEA,wBAFA;AAGA,wBAHA,EADA;;AAMA;AACA;AACA,kBADA;AAEA,iBAFA,EADA;;AAKA;AACA,kBADA;AAEA,gBAFA,EALA,EANA;;;AAgBA;AACA,cADA,sBACA,IADA,EACA;AACA;AACA;AACA;AACA;AACA,OAHA;AAIA;AACA;AACA,wBADA;AAEA,iBAFA;AAGA;AACA;AACA,SALA;;AAOA,KAfA;AAgBA,UAhBA,kBAgBA,CAhBA,EAgBA;;AAEA;AACA;;;;;;;;;;AAUA;AACA,KA9BA;AA+BA,UA/BA,oBA+BA;AACA;AACA;AACA,+BADA;;AAGA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA,6BADA;AAEA,qCAFA;AAGA,4DAHA,EADA;;;AAOA;AACA;AACA,OAdA;;AAgBA,KApDA;AAqDA,aArDA,uBAqDA;AACA;AACA;AACA,KAxDA;AAyDA,SAzDA,iBAyDA,OAzDA,EAyDA;AACA;AACA,KA3DA,EAhBA;;;AA8EA,MA9EA,kBA8EA;AACA;;;AAGA,GAlFA;AAmFA;AACA,WADA,mBACA,KADA,EACA;AACA;AACA,KAHA,EAnFA;;AAwFA;AACA;AACA,wDADA,GADA,CAxFA,E","file":"components/free-ui/free-moment-list.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./free-moment-list.vue?vue&type=template&id=6276d7df&\"\nvar renderjs\nimport script from \"./free-moment-list.vue?vue&type=script&lang=js&\"\nexport * from \"./free-moment-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/free-ui/free-moment-list.vue\"\nexport default component.exports","export * from \"-!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./free-moment-list.vue?vue&type=template&id=6276d7df&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var a0 =\n    _vm.item.image.length === 1\n      ? {\n          data: _vm.item.image[0]\n        }\n      : null\n\n  var f0 = _vm._f(\"getTime\")(_vm.item.created_at)\n\n  var g0 = _vm.item.likes.findIndex(function(v) {\n    return v.id === _vm.user.id\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        a0: a0,\n        f0: f0,\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./free-moment-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../XB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./free-moment-list.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\" flex p-2 mt-1 border-bottom\" style=\"width: 100%;\">\r\n\t\t<free-avatar :src=\"item.avatar ? item.avatar : '../../static/default.jpg'\" :size=\"80\" ></free-avatar>\r\n\t\t<view class=\"flex-1 flex  flex-column pl-2 \">\r\n\t\t\t<text class=\"my-2  \" style=\"font-size: 32rpx;color: #586b95;\">{{item.user_name}}</text>\r\n\t\t\t<text class=\"font mb-2 \" style=\"width: 540rpx;\">{{item.content}}</text>\r\n\t\t\t<view class=\" flex flex-wrap\" style=\"width: 560rpx;\">\r\n\t\t\t\t<free-image v-if=\" item.image.length === 1 \" :item=\"({data:item.image[0]})\" :maxX=\"400\" @previewVideo=\"previewImg\"></free-image>\r\n\t\t\t\t<image @click=\"previewImg(item.image,index)\" v-if=\"item.image.length > 1\" v-for=\"(item1,index) in item.image\" :src=\"item1\" mode=\"aspectFill\" class=\"mr-2 mb-2 bg-secondary\" style=\"width: 160rpx;height:160rpx;\"></image>\r\n\t\t\t\t<view class=\"py-2\" style=\"margin-bottom: 5rpx;\" v-if=\"item.video\">\r\n\t\t\t\t\t<video :src=\"item.video\" :poster=\"item.video+'?x-oss-process=video/snapshot,t_10,m_fast,w_300,f_png'\" controls style=\"height: 300rpx;width: 500rpx;\"></video>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"item.location\">\r\n\t\t\t\t<text class=\"my-1\" style=\"color: #586b95;font-size: 30rpx;\">{{item.location}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t<text class=\"font text-muted\">{{item.created_at| getTime}}</text>\r\n\t\t\t\t<div @click=\"handle\" >\r\n\t\t\t\t\t<text class=\"iconfont text-hover-primary mr-4\" >&#xe62a;</text>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\t<!-- 点赞 -->\r\n\t\t\t<view class=\" mt-2\" style=\"background-color:#f5f5f5 ;max-width: 500rpx;\" v-if=\" item.likes.length\">\r\n\t\t\t\t<view class=\" flex align-start p-2\" :class=\"item.likes.length ? 'border-bottom' : '' \">\r\n\t\t\t\t\t<text class=\"flex-shrink iconfont font text-hover-primary ml-1\">&#xe637;</text>\r\n\t\t\t\t\t<view class=\"flex flex-1 flex-wrap ml-1\">\r\n\t\t\t\t\t\t<text v-for=\"(like,sindex) in item.likes\" :key = \"sindex\" class=\"font  \" style=\"color: #586b95;\">{{sindex === item.likes.length - 1 ? like.name  :  like.name + ','}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 点赞 -->\r\n\t\t\t<!-- 评论 -->\r\n\t\t\t<view class=\"\" style=\"background-color:#f5f5f5 ;max-width: 500rpx;margin-top: 1rpx;\" v-if=\"item.comments.length\">\r\n\t\t\t\t<view class=\" flex align-start p-2\">\r\n\t\t\t\t\t<text class=\"flex-shrink iconfont font text-hover-primary ml-1\">&#xe64e;</text>\r\n\t\t\t\t\t<view class=\"flex flex-1 flex-column  ml-1\" >\r\n\t\t\t\t\t\t<view class=\"flex\"   v-for=\"(comment,cindex) in item.comments\" :key = \"cindex\">\r\n\t\t\t\t\t\t\t<text @click=\"reply(comment)\" class=\" \" style=\"color: #586b95;font-size: 32rpx;\">{{comment.user.name+ (comment.reply && comment.reply.name ? '' : ':')}}</text>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<text v-if=\"comment.reply && comment.reply.name\" class=\"text-dark\"   style=\"font-size: 32rpx;margin-left: 4rpx;margin-right: 4rpx;\">回复</text>\r\n\t\t\t\t\t\t\t\t<text v-if=\"comment.reply && comment.reply.name\" style=\"color: #586b95;font-size: 32rpx;\">{{comment.reply.name+\":\"}}</text>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<text class=\" ml-1 text-dark \" style=\"font-size: 32rpx;\">{{comment.content}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 评论 -->\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<free-popup :fixed = \"false\"  ref = \"popup\" :bodyWidth=\"370\" :bodyHeight=\"60\">\r\n\t\t\t<view class=\"bg-dark flex align-center \" style=\"width: 370rpx;height: 60rpx;\">\r\n\t\t\t\t<text class=\"iconfont text-white  flex-1 text-center\" style=\"font-size: 32rpx;\" @click=\"admire\">&#xe637;{{item.likes.findIndex(v=>v.id === user.id) === -1 ? '点赞' : '取消点赞' }}</text>\r\n\t\t\t\t<text @click=\"toComment\" class=\"iconfont text-white  flex-1 text-center\" style=\"font-size: 32rpx;\">&#xe64e;评论</text>\r\n\t\t\t</view>\r\n\t\t</free-popup>\r\n\t</view>\r\n</template>\n\n<script>\r\n\timport freeAvatar from '../../components/free-ui/free-avatar.vue'\r\n\timport freeImage from '../../components/free-ui/free-image.vue'\r\n\timport freePopup from './free-popup.vue'\r\n\timport {mapState} from 'vuex'\r\n\timport $T from '../../common/free-lib/time.js'\r\n\texport default{\r\n\t\tcomponents:{\r\n\t\t\tfreeAvatar,\r\n\t\t\tfreeImage,\r\n\t\t\tfreePopup\r\n\t\t},\r\n\t\tprops:{\r\n\t\t\titem:{\r\n\t\t\t\ttype:Object,\r\n\t\t\t\tdefault:{}\r\n\t\t\t},\r\n\t\t\tindex:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:0\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tpreviewImg(item,current=0) {\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tif(typeof(item) === 'string') \r\n\t\t\t\t{\r\n\t\t\t\t\tarr.push(item)\r\n\t\t\t\t}\r\n\t\t\t\telse arr = item\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent:current,\r\n\t\t\t\t\turls:arr,\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandle(e) {\r\n\t\t\t\t// #ifdef MP\r\n\t\t\t\tthis.$refs.popup.show(e.detail.x - uni.upx2px(250),e.detail.y-uni.upx2px(15))\r\n\t\t\t\treturn\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.$refs.popup.show(e.position.x-e.position.width - uni.upx2px(250),e.position.y-uni.upx2px(15))\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.$refs.popup.show(e.detail.x - uni.upx2px(280),e.currentTarget.offsetTop )\r\n\t\t\t\treturn \r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\tthis.$emit('show',{item:this.item})\r\n\t\t\t},\r\n\t\t\tadmire() {\r\n\t\t\t\tthis.$refs.popup.hide()\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tid:this.item.moment_id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$http.post('/moment/like',obj).then(res=>{\r\n\t\t\t\t\tif(res === '取消点赞成功') {\r\n\t\t\t\t\t\tthis.item.likes.splice(this.item.likes.findIndex(v=>v.id === this.user.id),1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.item.likes.push(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid:this.user.id,\r\n\t\t\t\t\t\t\t\tavatar:this.user.avatar,\r\n\t\t\t\t\t\t\t\tname:this.user.nickname || this.user.username\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tthis.toast('点赞成功')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\ttoComment() {\r\n\t\t\t\tconsole.log(this.index)\r\n\t\t\t\tthis.$emit('toComment',{index:this.index})\r\n\t\t\t},\r\n\t\t\treply(comment) {\r\n\t\t\t\tthis.$emit('toComment',{id:comment.user.id,name:comment.user.name,index:this.index})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tgetTime(value) {\r\n\t\t\t\treturn $T.gettime(value)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tuser:state=>state.user.user\r\n\t\t\t})\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}