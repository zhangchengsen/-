<view class="data-v-bf16e7f4"><nav-bar vue-id="6e1d75c0-1" showBack="{{true}}" title="{{totalNoreadnum?detail.name+('('+totalNoreadnum+')'):detail.name}}" showRight="{{true}}" class="data-v-bf16e7f4" bind:__l="__l" vue-slots="{{['rightIcon']}}"><view slot="rightIcon" class="data-v-bf16e7f4"><free-icon-button vue-id="{{('6e1d75c0-2')+','+('6e1d75c0-1')}}" icon="" data-event-opts="{{[['^click',[['navTo']]]]}}" bind:click="__e" class="data-v-bf16e7f4" bind:__l="__l"></free-icon-button></view></nav-bar><scroll-view class=" px-3 position-fixed left-0 right-0 data-v-bf16e7f4" style="{{'background-color:#E9E8E5;'+(topStyle+bottom)}}" scroll-y="true" show-scrollbar="{{false}}" scroll-with-animation="{{true}}" scroll-into-view="{{scrollInto}}"><block wx:for="{{chatList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><chat-item vue-id="{{'6e1d75c0-3-'+index}}" id="{{'id'+index}}" index="{{index}}" preTime="{{index?chatList[index-1].create_time:0}}" item="{{item}}" shownickname="{{currentChat.shownickname}}" data-ref="chatItem" data-event-opts="{{[['^preview',[['preview']]],['^withDraw',[['withDraw']]],['^remove',[['remove']]]]}}" bind:preview="__e" bind:withDraw="__e" bind:remove="__e" class="data-v-bf16e7f4 vue-ref-in-for" bind:__l="__l"></chat-item></block><view style="height:20rpx;" class="data-v-bf16e7f4"></view></scroll-view><view class="position-fixed left-0 right-0 flex align-center data-v-bf16e7f4" style="{{'height:105rpx;background-color:#f6f8f5;'+('bottom:'+keyBoardToBottom+'px;')}}"><block wx:if="{{mode!=='audio'}}"><free-icon-button vue-id="6e1d75c0-4" icon="" data-event-opts="{{[['^click',[['changeRecord']]]]}}" bind:click="__e" class="data-v-bf16e7f4" bind:__l="__l"></free-icon-button></block><block wx:else><free-icon-button vue-id="6e1d75c0-5" icon="" data-event-opts="{{[['^click',[['changeRecord']]]]}}" bind:click="__e" class="data-v-bf16e7f4" bind:__l="__l"></free-icon-button></block><block wx:if="{{mode!=='audio'}}"><textarea class="rounded flex-1 p-2 data-v-bf16e7f4" style="font-size:32rpx;background-color:white;height:50rpx;" adjust-position="{{false}}" fixed="{{true}}" data-event-opts="{{[['focus',[['e0',['$event']]]],['input',[['__set_model',['','text','$event',[]]]]]]}}" value="{{text}}" bindfocus="__e" bindinput="__e"></textarea></block><block wx:else><view data-event-opts="{{[['touchstart',[['startRecord',['$event']]]],['touchend',[['endRecord',['$event']]]],['touchcancel',[['cancelRecord',['$event']]]],['touchmove',[['moveRecord',['$event']]]]]}}" class="rounded flex-1 p-2 flex align-center justify-center data-v-bf16e7f4" style="{{'font-size:30rpx;background-color:white;height:75rpx;'+(isRecording?'background-color:#eee':'')}}" bindtouchstart="__e" bindtouchend="__e" bindtouchcancel="__e" bindtouchmove="__e"><text class="p-1 data-v-bf16e7f4">{{isRecording?'手指上滑，取消发送':'按住说话'}}</text></view></block><free-icon-button vue-id="6e1d75c0-6" icon="" data-event-opts="{{[['^click',[['moreFunc',['emoticon']]]]]}}" bind:click="__e" class="data-v-bf16e7f4" bind:__l="__l"></free-icon-button><block wx:if="{{!showSendButton}}"><free-icon-button vue-id="6e1d75c0-7" icon="" data-event-opts="{{[['^click',[['moreFunc']]]]}}" bind:click="__e" class="data-v-bf16e7f4" bind:__l="__l"></free-icon-button></block><block wx:else><text data-ref="text" data-event-opts="{{[['tap',[['send',['text']]]]]}}" class=" px-2 py-1 mr-1 data-v-bf16e7f4 vue-ref" style="color:white;background-color:#07C160;font-size:28rpx;" bindtap="__e">发送</text></block></view><free-popup vue-id="6e1d75c0-8" chat="{{true}}" bodyHeight="{{getHeight}}" bodyWidth="{{250}}" data-ref="list_pop" class="data-v-bf16e7f4 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="flex flex-column border flex-1 data-v-bf16e7f4" style="{{'width:250rpx;'+('height: '+getHeight+'rpx;')}}"><block wx:for="{{menu}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['popEvent',['$0'],[[['menu','',index,'event']]]]]]]}}" class="flex-1 pl-1 data-v-bf16e7f4" style="line-height:100rpx;" bindtap="__e">{{item.name}}</text></block></view></free-popup><block wx:if="{{mode==='action'||mode==='emoticon'}}"><view style="z-index:100;" class="data-v-bf16e7f4"><view data-event-opts="{{[['tap',[['hideMoreFunc']]]]}}" class="position-fixed left-0 right-0 top-0  _div data-v-bf16e7f4" style="{{(bottom)}}" bindtap="__e"></view><view class="position-fixed left-0 right-0 bottom-0 data-v-bf16e7f4" style="height:580rpx;"><swiper style="height:510rpx;" indicator-dots="{{renderList.length>1}}" class="data-v-bf16e7f4"><block wx:for="{{renderList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="row data-v-bf16e7f4"><block wx:for="{{item}}" wx:for-item="item1" wx:for-index="index1" wx:key="index1"><view data-event-opts="{{[['tap',[['actionOrEmoticonEvent',['$0'],[[['renderList','',index],['','',index1]]]]]]]}}" class="col-3 bg-light function data-v-bf16e7f4" style="height:255rpx;" bindtap="__e"><image style="width:100rpx;height:100rpx;" src="{{item1.icon}}" mode="widthFix" class="data-v-bf16e7f4"></image><text class="mt-2 font text-muted data-v-bf16e7f4">{{item1.name}}</text></view></block></swiper-item></block></swiper></view></view></block><block wx:if="{{isRecording}}"><view class="position-fixed rounded flex flex-column align-center justify-center data-v-bf16e7f4" style="{{'width:360rpx;height:360rpx;background-color:rgba(0,0,0,.3);'+(positionStyle)}}"><image style="width:200rpx;height:200rpx;" src="../../static/audio/play.gif" class="data-v-bf16e7f4"></image><text data-event-opts="{{[['tap',[['stopRecord',['$event']]]]]}}" bindtap="__e" class="data-v-bf16e7f4">手指上滑，取消发送</text></view></block></view>